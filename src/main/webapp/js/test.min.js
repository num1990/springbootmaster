$(document).ready(function(){

    $("#yzm_btn").click(function() {
        var mobile = $('#mobile').val();
        if (mobile.trim().length == 0) {
            alert('手机号不能为空!');
        } else {
            $("#yzm_btn").attr("disabled",true);
            var time = 10;  //倒计时10秒
            var timer = setInterval(fun1, 1000);  //设置定时器
            function fun1() {
                time--;
                if(time>=0) {
                    $("#yzm_btn").html(time + "s后重新发送");
                }else{
                    $("#yzm_btn").html ("获取验证码");
                    $("#yzm_btn").attr("disabled",false);  //倒计时结束能够重新点击发送的按钮
                    clearTimeout(timer);  //清除定时器
                    time = 10;  //设置循环重新开始条件
                }
            }
        }
    });

    // /** * 手机验证码 */
    // var mobile = '';
    // var count = 10; //验证码 有效期 30s
    // var curCount = 0; //当前剩余秒数 开始为0
    // var InterValObj = "";
    //
    // $(function() {
    //     //获取验证码
    //     $('#yzm_btn').click(function() {
    //         //获取手机号
    //         mobile = $('#mobile').val();
    //         if (mobile.trim().length == 0) {
    //             alert('手机号不能为空。。。');
    //         } else {
    //             $('#remainTime').removeClass("hidden");
    //             $('#yzm_btn').attr("disabled",true);
    //             getCode();
    //             // sendYzm();
    //         }
    //
    //     });
    //
    // /* * 计时器 */
    // function getCode() {
    //     window.clearInterval(InterValObj);//停止计时器
    //     curCount = count;
    //     InterValObj = window.setInterval(setRemainTime, 1000); //启动计时器，1秒执行一次
    // }
    //
    // /* * 更新剩余时间 */
    // function setRemainTime() {
    //     if (curCount == 1) {
    //         window.clearInterval(InterValObj);//停止计时器
    //         $('#remainTime').addClass("hidden");
    //         $('#yzm_btn').attr("disabled",false);
    //         $("#remainTime").html(count + "s后重新发送");
    //     } else {
    //         curCount--;
    //         $("#remainTime").html(curCount + "s后重新发送");
    //     }
    // }
});

// /** * 发送验证码 */
// function sendYzm() {
//     //发送验证码
//     var param = {
//         mobile: mobile
//     }
//     $.post('/sys/mobileCode/sendMobileCode.do', param, function(data) {
//         console.log('data:', data);
//         alert(data.msg);
//         if (data.success) {
//             //启动定时器
//             getCode();
//         }
//     });
// }
//     //验证
//     $('#check_btn').click(function() {
//         var mbCode = $('#yzm').val();
//         var timing = $("#remainTime").text();
//         if(timing == '0s') {
//             alert("验证码过期请重新获取");
//             return ;
//         } else if (mbCode == "" && mbCode.length<1){
//             alert("验证码不能为空");
//             return ;
//         } else {
//             //拦截器验证短信验证码
//             var afterSendMobileCode = function(data) {
//                 alert(data.msg)
//                 if(data.success){
//                     //停止计时
//                     window.clearInterval(InterValObj);
//                 }
//             };
//             $.post('/sys/mobileCode/validateMobileCode.do', {"mobile":mobile, "vCode":mbCode}, afterSendMobileCode);
//         }
//
//     });

// });